

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>13. Week 10: Asynchronous Computations and Futures &mdash; YSC4231 2021</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="14. Week 11: Data-Parallel Collections" href="week-11-parallel.html" />
    <link rel="prev" title="12. Week 09: Data Race Detection in Practice" href="week-11-races.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> YSC4231: Parallel, Concurrent and Distributed Programming
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="syllabus.html">1. Course Syllabus</a></li>
<li class="toctree-l1"><a class="reference internal" href="prerequisites.html">2. Software Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">3. FAQ on Learning and Plagiarism</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="week-01-intro.html">1. Week 01: Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="week-02-scala.html">2. Week 02: Scala Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="week-03-mutex.html">3. Week 03: Mutual Exclusion</a></li>
<li class="toctree-l1"><a class="reference internal" href="week-03-concurrent-objects.html">4. Week 04: Concurrent Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="week-04-wait-free.html">5. Week 05: Wait-Free Implementations and Consensus</a></li>
<li class="toctree-l1"><a class="reference internal" href="week-05-spinlocks.html">6. Week 06: Spin Locks and Contention</a></li>
<li class="toctree-l1"><a class="reference internal" href="week-05-monitors.html">7. Week 06: Monitors and Blocking Synchronisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="week-07-midterm-project.html">8. Midterm Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="week-06-fine-lists.html">9. Week 07: Concurrent Lists and Fine-Grained Locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="week-08-queues-stacks.html">10. Week 08: Concurrent Queues</a></li>
<li class="toctree-l1"><a class="reference internal" href="week-09-skiplists.html">11. Week 09: Concurrent Stacks and Skiplists</a></li>
<li class="toctree-l1"><a class="reference internal" href="week-11-races.html">12. Week 09: Data Race Detection in Practice</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">13. Week 10: Asynchronous Computations and Futures</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#summary-of-the-lecture">13.1. Summary of the Lecture</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="week-11-parallel.html">14. Week 11: Data-Parallel Collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="week-12-actors.html">15. Week 12: Actors and Message-Passing Concurrency</a></li>
<li class="toctree-l1"><a class="reference internal" href="week-13-consensus.html">16. Week 13: Distributed Consensus and BFT; Wrap-Up</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">YSC4231: Parallel, Concurrent and Distributed Programming</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>13. Week 10: Asynchronous Computations and Futures</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="week-10-asynchronous-computations-and-futures">
<h1>13. Week 10: Asynchronous Computations and Futures<a class="headerlink" href="#week-10-asynchronous-computations-and-futures" title="Permalink to this headline">¶</a></h1>
<p>Useful resources:</p>
<ul class="simple">
<li><a class="reference external" href="https://docs.scala-lang.org/overviews/core/futures.html">Documentation on Scala Futures and Promises</a></li>
<li><a class="reference external" href="https://docs.scala-lang.org/tour/for-comprehensions.html">Scala’s for-comprehensions</a></li>
<li>Futures and Async: <a class="reference external" href="https://speakerdeck.com/phaller/futures-and-async-when-to-use-which">Slides</a>
and <a class="reference external" href="https://www.youtube.com/watch?v=TyuPdFDxkro">Video</a></li>
<li><a class="reference external" href="https://github.com/ysc4231/lectures-2021/tree/10-futures">Code with examples</a>,
package <code class="docutils literal notranslate"><span class="pre">futures</span></code></li>
</ul>
<div class="section" id="summary-of-the-lecture">
<h2>13.1. Summary of the Lecture<a class="headerlink" href="#summary-of-the-lecture" title="Permalink to this headline">¶</a></h2>
<p>A short summary of the files from the accompanying code is given below,
outlining the characteristic aspects of working with Java Futures, as well as
Scala Futures and Promises. It is recommended that the files are explored in the
order they appear in the following list:</p>
<p><strong>Java Futures</strong></p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">SortAndRead</span></code> — reading a user input after having performed a costly
operation (array sorting). This examples demonstrates the need for
parallelisation.</li>
<li><code class="docutils literal notranslate"><span class="pre">SortAndRead2</span></code> — a better version of the previous program. Sorting is
moved into a separate future. Introducing Java’s thread pools and the class
<code class="docutils literal notranslate"><span class="pre">Future</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">SortAndRead3</span></code> — even better implementation, in which the user input is
also moved into a separate future.</li>
</ul>
<p><strong>An Exercise on Java Futures</strong></p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">FutureSort</span></code> — an old friend, parallel quick-sort, now re-implemented with
Java futures. An interesting question is why some of the offered thread pools,
e.g., <code class="docutils literal notranslate"><span class="pre">Executors.newFixedThreadPool(4)</span></code> make it deadlock?</li>
</ul>
<p><strong>Scala Futures</strong></p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">FutureDataType</span></code> — a first example of using Scala’s futures, its
<code class="docutils literal notranslate"><span class="pre">isCompleted</span></code> method and the implicit execution context
(<code class="docutils literal notranslate"><span class="pre">ExecutionContext.Implicits.global</span></code>).</li>
<li><code class="docutils literal notranslate"><span class="pre">FuturesCallbacks</span></code> — demonstration of processing results of the futures
asynchronously via callbacks (using <code class="docutils literal notranslate"><span class="pre">foreach</span></code> method).</li>
<li><code class="docutils literal notranslate"><span class="pre">FutureExceptions</span></code> — treatment of exceptions in futures, via
<code class="docutils literal notranslate"><span class="pre">onComplete</span></code> method and pattern matching on the result class: <code class="docutils literal notranslate"><span class="pre">Success</span></code> or
<code class="docutils literal notranslate"><span class="pre">Failure</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">AwaitExample</span></code> — an example showing the use of <code class="docutils literal notranslate"><span class="pre">Await.result</span></code> method to
wait for a future to complete or fail otherwise.</li>
</ul>
<p><strong>Composing Scala Futures</strong></p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">Options</span></code> — a quick practice on building combinators for the <code class="docutils literal notranslate"><span class="pre">Option</span></code>
type. Serves as an introduction to similar future combinators introduced next.</li>
<li><code class="docutils literal notranslate"><span class="pre">ComposingFutures</span></code> — an example of composing two futures running
asynchronously, via the explicit <code class="docutils literal notranslate"><span class="pre">flatMap</span></code> combinator (or using the <code class="docutils literal notranslate"><span class="pre">for</span></code>
notation). Check: what changes in the execution if the futures are inlined
under the <code class="docutils literal notranslate"><span class="pre">for</span></code> comprehension?</li>
<li><code class="docutils literal notranslate"><span class="pre">BlacklistedFiles</span></code> — a large example involving composing futures in the
implementation of <code class="docutils literal notranslate"><span class="pre">getAllBlacklisted</span></code>. Multiple ways to query the result are
possible.</li>
<li><code class="docutils literal notranslate"><span class="pre">ScalaFuturesTests</span></code> — shows how to test futures.</li>
</ul>
<p><strong>Scala Promises</strong></p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">ProducerConsumer</span></code> — implementation of a producer-consumer with a
promise, which serves as a single-assignment mailbox.</li>
<li><code class="docutils literal notranslate"><span class="pre">ProducerConsumer2</span></code> — demonstration of <code class="docutils literal notranslate"><span class="pre">isCompleted</span></code> method of
promises.</li>
<li><code class="docutils literal notranslate"><span class="pre">ProducerConsumer3</span></code> — failing the promise and recovering after an
exception in the future using the <code class="docutils literal notranslate"><span class="pre">recover</span></code> method.</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="week-11-parallel.html" class="btn btn-neutral float-right" title="14. Week 11: Data-Parallel Collections" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="week-11-races.html" class="btn btn-neutral" title="12. Week 09: Data Race Detection in Practice" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, Ilya Sergey

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"extensions": ["tex2jax.js"], "jax": ["input/TeX", "output/HTML-CSS"]})</script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>